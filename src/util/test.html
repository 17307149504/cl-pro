<!DOCTYPE html>
<meta charset="utf-8">
<svg width="960" height="500"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

    var svg = d3.select("svg"),
        width = +svg.attr("width"), //设置宽度
        height = +svg.attr("height"),
        transform = d3.zoomIdentity;//获取抓取对象时的起始点,还没弄清楚k,x,y的含义，感觉k像是缩放比例，x,y分别是x轴、y轴的起始点
    console.log(transform);//控制台输出结果：{k: 1, x: 0, y: 0}
    var points = d3.range(200).map(phyllotaxis(10));

    var g = svg.append("g");

    g.selectAll("circle")
        .data(points)
        .enter().append("circle")
        .attr("cx", function (d) { return d.x; })
        .attr("cy", function (d) { return d.y; })
        .attr("r", 2.5)
        .call(d3.drag()
            .on("drag", dragged));

    svg.call(d3.zoom()
        .scaleExtent([1 / 2, 8])
        .on("zoom", zoomed));

    function zoomed() {
        g.attr("transform", d3.event.transform);
    }

    function dragged(d) {
        d3.select(this).attr("cx", d.x = d3.event.x).attr("cy", d.y = d3.event.y);
    }

    function phyllotaxis(radius) {
        var theta = Math.PI * (3 - Math.sqrt(5));
        return function (i) {
            var r = radius * Math.sqrt(i), a = theta * i;
            return {
                x: width / 2 + r * Math.cos(a),
                y: height / 2 + r * Math.sin(a)
            };
        };
    }

</script>